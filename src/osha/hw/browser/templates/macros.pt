<html>
<body>
    <div metal:define-macro="translations">
        <ul id="hw2012languages" class="languages"
            tal:define="helper here/@@hw_view">
          <tal:lang_code repeat="translation helper/getTranslations">

            <li tal:define="obj nocall:translation/obj"
                tal:on-error="string: err in ${lang_code}"
                tal:attributes="class python:obj == context and 'current' or ''">

              <a tal:attributes="href obj/absolute_url; lang translation/lang"
                 tal:content="translation/native">Dansk</a>

            <blockquote tal:condition="python:context.getPhysicalPath()[-1]=='hw2012'" tal:content="structure python:translation.getText()"/>

            </li>
          </tal:lang_code>
        </ul>
    </div>
    <div metal:define-macro="navigation">
        <tal:vars define="helper here/@@hw_view">
          <ul class="navigation" id="hw2012Navigation">
            <li id="portal-tab-home">
              <a data-setclass="id='body'!values='template-*:template-home'"
                 data-injection="#mainContent#appendix"
                 href="#mainContent#appendix"
                 tal:attributes="href string:${helper/getHomeURL}#mainContent#appendix"
                 >Healthy<br>Workplaces</a>
            </li>
            <li tal:repeat="navitem helper/getNavigation"
                tal:attributes="id python:repeat['navitem'].end and 'portal-tab-getInvolved' or None;
                                class python:navitem[0] in context.REQUEST.PARENTS and 'current' or None;">
              <a xdata-setclass="id='body'!values='template-*:template-landing'"
                 xdata-injection="#mainContent#appendix"
                 href="leadership.html#mainContent#appendix"
                 tal:define="landing_page python:navitem[0]"
                 tal:attributes="href string:${landing_page/absolute_url}#mainContent#appendix"
                 tal:content="landing_page/Title">Leadership</a>
              <ul>
                <li tal:repeat="detail_page python:navitem[1]">
                  <a data-setclass="id='body'!values='template-*:template-content-a'"
                     data-injection="#mainContent#appendix"
                     href="benefits.html#mainContent#appendix"
                     tal:attributes="href string:${detail_page/getURL}#mainContent#appendix"
                     tal:content="detail_page/Title"
                     >Benefits</a></li>
              </ul>
            </li>
          </ul>
        </tal:vars>
    </div>
    <div metal:define-macro="news">
        <div class="portlet" id="portletNews"
             tal:define="helper here/@@hw_view;
                limit limit|python:3">

          <ul>
            <li tal:repeat="news python:helper.getNews(limit)">
              <tal:news_item>
                <a tal:attributes="href news/link">
                  <img tal:attributes="src news/img_url" width="85" tal:on-error="string:no image"/>
                  <h3 tal:replace="news/title">EU-OSHA targets health risks in cleaning industry for European Week 2009</h3> 
                </a>
                <p tal:replace="structure news/description"></p>
              </tal:news_item>
            </li>
          </ul>

          <p class="footer"><a tal:attributes="href helper/getNewsfolderUrl">More news&#8230;</a>
          </p>
        </div>
    </div>
    <div metal:define-macro="events">
        <div class="portlet" id="portletEvents"
             tal:define="helper here/@@hw_view;
                 limit limit|python:3">

          <ul class="events">
            <tal:block repeat="event python:helper.getEvents(limit)">
              <li>

                <a tal:attributes="href event/link">
                  <h3 tal:content="event/title" />
                </a>
                <p class="byline" tal:content="event/location">
                  Algarve region, Portugal
                </p>

                <p class="calendar-medium" tal:define="start event/start">
                  <strong class="day" tal:content="start/day">2</strong>
                  <strong class="month char-count-3" tal:define="ll python:here.len_month(start.month()); ln python:ll[1]"
                          tal:attributes="class string:month char-count-${ln}"
                          tal:content="python:ll[0]">December</strong>
                <strong class="year" tal:content="start/year">2010</strong></p>
                <p class="description" tal:content="event/description" />

              </li>
            </tal:block>
          </ul>

          <p class="footer">
            <a tal:attributes="href helper/getEventsfolderUrl"
               href="http://osha.europa.eu/en/campaigns/hw2010/events/">More events&#8230;</a></p>
        </div>
    </div>
</body>
</html>
